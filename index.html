<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ëœë¤ ìƒë‹´ ë¶ â€” ì˜¤ë¼í´ v1</title>
  <meta name="description" content="ì˜›ë‚  'ëŒ€ë‹µí•´ì£¼ëŠ” ì±…' ëŠë‚Œì˜ ë¬´ë£Œ ëœë¤ ìƒë‹´ ì‚¬ì´íŠ¸. ì§ˆë¬¸ì„ ì ìœ¼ë©´ ì¹´í…Œê³ ë¦¬/ë¶„ìœ„ê¸°ë³„ë¡œ ì¡°ì–¸ì„ í™•ë¥ ì ìœ¼ë¡œ ì¶”ì²œí•´ì¤˜ìš”."/>
  <link rel="canonical" href="https://test-user-woo.github.io/oracle-book/">
  <meta property="og:title" content="ëœë¤ ìƒë‹´ ë¶ â€” ì˜¤ë¼í´"/>
  <meta property="og:description" content="ì§ˆë¬¸ì„ ì ìœ¼ë©´ ì¹´í…Œê³ ë¦¬/ë¶„ìœ„ê¸°ë³„ë¡œ ì¡°ì–¸ì„ ëœë¤ ì¶”ì²œ!"/>
  <meta property="og:type" content="website"/>
  <meta property="og:url" content="https://test-user-woo.github.io/oracle-book/">
  <meta property="og:image" content="https://test-user-woo.github.io/oracle-book/og.png">
  <link href="https://fonts.googleapis.com/css2?family=Nanum+Brush+Script&family=Pretendard:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0c10; --panel:#12131a; --ink:#e8e6df; --muted:#a9acb6; --accent:#7c5cff; --accent2:#22d3ee;
      --radius:18px; --shadow:0 10px 24px rgba(0,0,0,.35), inset 0 0 60px rgba(255,255,255,.02);
    }
    *{box-sizing:border-box}
    body{margin:0;background:radial-gradient(1200px 600px at 10% -10%, rgba(124,92,255,.18), transparent 60%),
      radial-gradient(1000px 500px at 120% 10%, rgba(34,211,238,.12), transparent 60%), var(--bg);
      color:var(--ink);font-family: system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans KR', 'Apple SD Gothic Neo', 'Malgun Gothic', Arial, sans-serif;}
    a{color:inherit}
    .wrap{max-width:980px;margin:0 auto;padding:24px}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:16px}
    .brand{font-family:'Nanum Brush Script', cursive;font-size:38px;letter-spacing:.5px}
    .brand .dot{color:var(--accent)}
    .card{background:var(--panel); border:1px solid rgba(255,255,255,.08); border-radius:var(--radius); padding:18px; box-shadow:var(--shadow)}
    h1{margin:6px 0 12px;font-size:22px}
    label{display:block;margin:10px 0 6px;color:var(--muted);font-size:14px}
    textarea{width:100%;min-height:80px;resize:vertical;background:#0f1016;color:var(--ink);border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:12px;font:inherit}
    select,input[type="range"]{width:100%;}
    .row{display:grid;gap:12px;grid-template-columns:1fr}
    @media(min-width:720px){.row{grid-template-columns:1fr 1fr}}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:14px;border:1px solid rgba(255,255,255,.14);background:linear-gradient(135deg, rgba(124,92,255,.16), rgba(34,211,238,.12));cursor:pointer}
    .btn:hover{filter:brightness(1.08)}
    .answers{display:grid;gap:12px;margin-top:14px}
    .ans{padding:16px;border-radius:14px;background:#0f1117;border:1px solid rgba(255,255,255,.08)}
    .tag{display:inline-block;font-size:12px;color:#0b0c10;background:linear-gradient(135deg, var(--accent), var(--accent2));padding:3px 8px;border-radius:999px;margin-right:8px}
    .muted{color:var(--muted)}
    .tiny{font-size:12px}
    .flex{display:flex;align-items:center;justify-content:space-between;gap:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">Oracle Book<span class="dot">.</span></div>
      <div class="tiny muted">â€œì˜›ë‚  ëŒ€ë‹µí•´ì£¼ëŠ” ì±…â€ ëŠë‚Œì˜ ë¬´ë£Œ ëœë¤ ìƒë‹´</div>
    </header>

    <section class="card">
      <h1>ì§ˆë¬¸ì„ ì ì–´ë´</h1>
      <label for="q">ì˜ˆ: "ì´ ì¹œêµ¬ì—ê²Œ ê³ ë°±í• ê¹Œ?"</label>
      <textarea id="q" placeholder="ë„¤ ê³ ë¯¼ì„ í•œ ì¤„ë¡œ ì ì–´ì¤˜"></textarea>

      <div class="row">
        <div>
          <label for="mode">ë‹µë³€ ìˆ˜</label>
          <select id="mode">
            <option value="1">í•œ ì¤„ ì¡°ì–¸ (1ê°œ)</option>
            <option value="3">3ì¥ ìŠ¤í”„ë ˆë“œ (3ê°œ)</option>
          </select>
        </div>
        <div>
          <label for="vibe">ë¶„ìœ„ê¸°(ì„±í–¥) â€” ì‹ ì¤‘ â†â†’ ëŒ€ë‹´</label>
          <input id="vibe" type="range" min="0" max="100" value="50"/>
        </div>
      </div>

      <div class="row" style="margin-top:8px">
        <div>
          <label for="cat">ì¹´í…Œê³ ë¦¬ (ìë™ ì¶”ì²œ)</label>
          <select id="cat">
            <option value="auto" selected>ìë™</option>
            <option value="love">ì‚¬ë‘/ê³ ë°±</option>
            <option value="friend">ì¹œêµ¬/ì¸ê°„ê´€ê³„</option>
            <option value="study">ê³µë¶€/ì§„ë¡œ</option>
            <option value="risk">ê²°ì •/ë¦¬ìŠ¤í¬</option>
            <option value="mood">ë§ˆìŒ/ìê¸°ëŒë´„</option>
            <option value="general">ì¼ë°˜</option>
          </select>
        </div>
        <div class="flex" style="align-items:end">
          <button class="btn" id="askBtn">ğŸ”® ë¬¼ì–´ë³´ê¸°</button>
          <button class="btn" id="shuffleBtn" title="ê°™ì€ ì§ˆë¬¸ì— ë‹¤ë¥¸ ê²°ê³¼">ğŸ² ë‹¤ì‹œ ë½‘ê¸°</button>
        </div>
      </div>

      <div class="answers" id="answers"></div>
      <div class="tiny muted" style="margin-top:8px">â€» ì‹¤ì œ ìƒë‹´ì´ ì•„ë‹Œ ê°€ë²¼ìš´ ì¡°ì–¸/ì•„ì´ë””ì–´ ì œì‹œ ë„êµ¬ì˜ˆìš”. ì¤‘ìš”í•œ ê²°ì •ì€ ì‹ ì¤‘íˆ, ë¯¿ì„ ë§Œí•œ ì–´ë¥¸ê³¼ ìƒì˜í•˜ê¸°! ğŸ™</div>
    </section>
  </div>

  <script>
    // --- ë°ì´í„°: ì¹´í…Œê³ ë¦¬ë³„ ë‹µë³€ í’€ ---
    // ê° í•­ëª©: { t: 'ë¬¸êµ¬', k: 'ë ˆì´ë¸”', s: 'sentiment', w: ê¸°ë³¸ê°€ì¤‘ì¹˜ }
    const POOL = {
      love: [
        {t:'ê³ ë°±ì€ íƒ€ì´ë°ì´ì•¼. ë‹¤ìŒ ì¢‹ì€ ìˆœê°„ì„ ê¸°ë‹¤ë ¤ë´.', k:'íƒ€ì´ë°', s:'wait', w:16},
        {t:'ì†”ì§í•˜ê²Œ, ì§§ê³  ë‹´ë°±í•˜ê²Œ. í•´ë³´ì.', k:'ê³ ', s:'go', w:18},
        {t:'ì¹œêµ¬ë¡œì„œ ë” ì•Œì•„ê°€ëŠ” ì‹œê°„ì„ ê°€ì ¸.', k:'ì²œì²œíˆ', s:'slow', w:14},
        {t:'ìƒëŒ€ê°€ í¸í•œ ìƒí™©ì¸ì§€ ë¨¼ì € ì²´í¬!', k:'ë°°ë ¤', s:'reflect', w:12},
        {t:'ì˜¤ëŠ˜ì€ ì—°ìŠµë§Œ. ë‚´ì¼ ì§„ì§œë¡œ ë§í•´.', k:'ì—°ìŠµ', s:'plan', w:12},
        {t:'ë©”ì‹œì§€ë³´ë‹¤ ì§ì ‘ ëˆˆì„ ë³´ê³ .', k:'ì§ì ‘', s:'go', w:12},
        {t:'ì§€ê¸ˆ ê°ì • ì ìˆ˜ 10ì  ë§Œì  ëª‡ ì ? 7 ì´ìƒì´ë©´ ê³ !', k:'ìê°€ì²´í¬', s:'go', w:10},
        {t:'ë¶ˆí™•ì‹¤í•˜ë©´, ê°€ë²¼ìš´ ì´ˆëŒ€ë¶€í„°.', k:'ë¼ì´íŠ¸', s:'middle', w:12},
        {t:'ê±°ì ˆë„ ê´€ê³„ì˜ í•œ ë¶€ë¶„. ìƒì²˜ ëŒ€ë¹„ë„ ê³„íšì— ë„£ì.', k:'ì•ˆì „ë§', s:'caution', w:10},
        {t:'ì˜¤ëŠ˜ì€ ë„ˆë¥¼ ëŒë³´ëŠ” ë‚ . ê³ ë°±ì€ ë‹¤ìŒ ê¸°íšŒì—.', k:'ì…€í”„ì¼€ì–´', s:'self', w:8}
      ],
      friend: [
        {t:'ë¨¼ì € ì•ˆë¶€ë¥¼ ê±´ë„¤ë´. ì‘ì€ ì‹œì‘ì´ ë¶„ìœ„ê¸°ë¥¼ ë°”ê¿”.', k:'ì‹œì‘', s:'go', w:18},
        {t:'ëŒ€í™”ëŠ” ì‚¬ì‹¤ í™•ì¸ â†’ ê°ì • â†’ ìš”ì²­ ìˆœì„œë¡œ.', k:'êµ¬ì¡°', s:'reflect', w:16},
        {t:'ì§€ê¸ˆì€ ë“£ëŠ” ì‚¬ëŒì´ ë˜ì–´ì¤˜.', k:'ê²½ì²­', s:'slow', w:16},
        {t:'ê±°ë¦¬ë¥¼ ì‚´ì§ ë‘ê³  ì„œë¡œ ì¿¨ë‹¤ìš´.', k:'ì¿¨ë‹¤ìš´', s:'wait', w:12},
        {t:'ì‚¬ê³¼ê°€ í•„ìš”í•˜ë‹¤ë©´ ì§§ê³  ëª…í™•í•˜ê²Œ.', k:'ì‚¬ê³¼', s:'go', w:14},
        {t:'ì¥ë‚œ ë§ê³  ì‚¬ì‹¤ë§Œ. ì˜¤í•´ë¥¼ ì¤„ì—¬.', k:'ëª…ë£Œ', s:'caution', w:12}
      ],
      study: [
        {t:'ì˜¤ëŠ˜ 20ë¶„ë§Œ ì‹œì‘. íƒ€ì´ë¨¸ ì¼œê³  GO.', k:'ì‘ê²Œì‹œì‘', s:'go', w:20},
        {t:'ëª©í‘œë¥¼ â€œë‹¤ìŒ í•œ ë¬¸ì œâ€ë¡œ ì¤„ì—¬ë´.', k:'ìŠ¬ë¼ì´ìŠ¤', s:'middle', w:16},
        {t:'ì§‘ì¤‘ì´ ì•ˆ ë˜ë©´ ì¥ì†Œë¥¼ ë°”ê¿”.', k:'í™˜ê²½', s:'reflect', w:14},
        {t:'íœ´ì‹ì´ í•„ìš”í•œ ì‹ í˜¸. 15ë¶„ ë¦¬í”„ë ˆì‹œ.', k:'íœ´ì‹', s:'self', w:12},
        {t:'ê³„íšë§Œ ì„¸ìš°ì§€ ë§ê³  5ë¶„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰.', k:'ì‹¤í–‰', s:'go', w:16},
        {t:'ì§€ê¸ˆì€ ì •ë³´ ìˆ˜ì§‘. ê²°ì •ì€ ë‚´ì¼ ì•„ì¹¨.', k:'ë³´ë¥˜', s:'wait', w:10}
      ],
      risk: [
        {t:'ë¦¬ìŠ¤í¬ ëª©ë¡ 3ê°œë§Œ ì ê³  ì‹œì‘í•´.', k:'ë¦¬ìŠ¤í¬ì •ë¦¬', s:'reflect', w:16},
        {t:'ì‘ê²Œ ì‹œë„í•´ë³´ê³  í™•ëŒ€í•˜ì.', k:'íŒŒì¼ëŸ¿', s:'middle', w:18},
        {t:'ì˜¤ëŠ˜ì€ ì¤€ë¹„, ë‚´ì¼ ì‹¤í–‰.', k:'ì¤€ë¹„', s:'wait', w:12},
        {t:'ë°”ë¡œ ì‹œì‘! í•´ë³´ë©´ì„œ ë°°ì›Œ.', k:'ì¦‰ì‹œ', s:'go', w:16},
        {t:'ì¤‘ìš”í•œ ê±´ ì•ˆì „. ë³´í˜¸ì¥ì¹˜ ë¨¼ì €.', k:'ì•ˆì „', s:'caution', w:14}
      ],
      mood: [
        {t:'ì§€ê¸ˆ ë§ˆìŒì„ 10ê¸€ì ë©”ëª¨ë¡œ ì ì–´ë´.', k:'ê°ì •ë¼ë²¨', s:'self', w:18},
        {t:'ë¬¼ í•œ ì” + 3ë¶„ ìŠ¤íŠ¸ë ˆì¹­.', k:'ê¸°ë³¸ê´€ë¦¬', s:'self', w:16},
        {t:'ì‹ ë¢°í•˜ëŠ” ì‚¬ëŒì—ê²Œ í•œ ë¬¸ì¥ë§Œ ê³µìœ .', k:'ê³µìœ ', s:'reflect', w:14},
        {t:'ì˜¤ëŠ˜ì€ ì‰¬ì–´ê°€ë„ ë¼.', k:'íœ´ì‹í—ˆìš©', s:'wait', w:12},
        {t:'ì‘ì€ ì‚°ì±…ì´ ìƒê°ì„ ì •ë¦¬í•´ì¤˜.', k:'ì‚°ì±…', s:'go', w:14}
      ],
      general: [
        {t:'ê°€ì¥ ì‰¬ìš´ í•œ ê±¸ìŒì„ ë¨¼ì €.', k:'ì²«ê±¸ìŒ', s:'go', w:18},
        {t:'ì •ë³´ë¥¼ ë” ëª¨ìœ¼ì. 20ë¶„ ë¦¬ì„œì¹˜.', k:'ë¦¬ì„œì¹˜', s:'wait', w:12},
        {t:'ì¡°ì–¸ 2ê°œë§Œ ë” ë¬»ê³  ê²°ì •.', k:'ì˜ê²¬ìˆ˜ì§‘', s:'middle', w:14},
        {t:'ì‹¤ìˆ˜í•´ë„ ê´œì°®ì•„. ë‹¤ì‹œ ì‹œë„í•˜ë©´ ë¼.', k:'ë‹¤ì‹œ', s:'self', w:14},
        {t:'ë§ˆê° ì‹œê°„ì„ ì •í•˜ì. ê·¸ë•Œ ê²°ì •.', k:'ë°ë“œë¼ì¸', s:'caution', w:12}
      ]
    };

    // --- ê°„ë‹¨ í‚¤ì›Œë“œë¡œ ì¹´í…Œê³ ë¦¬ ìë™ ì¶”ë¡  ---
    const KEYWORDS = [
      {cat:'love', keys:['ê³ ë°±','ì‚¬ë‘','ì¢‹ì•„','ì—°ì• ','å‘Šç™½','ë°ì´íŠ¸','í˜¸ê°','ì¸']},
      {cat:'friend', keys:['ì¹œêµ¬','ê´€ê³„','ì‹¸ì›€','ì˜¤í•´','í™”í•´','ë‹¨í†¡','ì™•ë”°']},
      {cat:'study', keys:['ê³µë¶€','ì‹œí—˜','ìˆ™ì œ','ì§„ë¡œ','ê³¼ì œ','ì…ì‹œ','í•™ì›']},
      {cat:'risk', keys:['ê²°ì •','ì‹œë„','ì‹œì‘','ë„ì „','ë¦¬ìŠ¤í¬','ìœ„í—˜','íˆ¬ì','í”„ë¡œì íŠ¸']},
      {cat:'mood', keys:['ìš°ìš¸','ë¶ˆì•ˆ','ìŠ¤íŠ¸ë ˆìŠ¤','í˜ë“¤','ê¸°ë¶„','ê°ì •','ì§œì¦','í”¼ê³¤']}
    ];

    // --- ê°€ì¤‘ì¹˜ ì¶”ì²¨ ìœ í‹¸ ---
    function pickWeighted(items){
      const total = items.reduce((a,b)=>a+b.w,0);
      let r = Math.random()*total;
      for(const it of items){ r -= it.w; if(r<=0) return it; }
      return items[items.length-1];
    }

    // vibe(0~100): 0=ì‹ ì¤‘, 50=ì¤‘ë¦½, 100=ëŒ€ë‹´ â†’ sentiment ê°€ì¤‘ì¹˜ ë³´ì •
    function applyVibeWeight(base, vibe){
      const biasGo = (vibe-50)/50; // -1 ~ +1
      const factor = {
        go: 1 + 0.35*biasGo,
        middle: 1 + 0.15*biasGo,
        wait: 1 - 0.20*biasGo,
        caution: 1 - 0.10*biasGo,
        reflect: 1.0,
        slow: 1 - 0.15*biasGo,
        self: 1.0
      };
      return base.map(x=>({...x, w: Math.max(2, Math.round(x.w * (factor[x.s]||1)))}));
    }

    function detectCategory(q){
      const text = (q||'').toLowerCase();
      const ko = q||'';
      for(const row of KEYWORDS){
        if(row.keys.some(k=> ko.includes(k))) return row.cat;
      }
      // ê°„ë‹¨ ì˜ë¬¸ í‚¤ì›Œë“œë„ ëŒ€ì‘
      if(text.includes('love')||text.includes('crush')) return 'love';
      if(text.includes('friend')) return 'friend';
      if(text.includes('study')||text.includes('exam')||text.includes('school')) return 'study';
      if(text.includes('risk')||text.includes('decide')) return 'risk';
      if(text.includes('sad')||text.includes('anx')) return 'mood';
      return 'general';
    }

    // ë‹µë³€ ìƒì„±
    function answer({q, catSel, mode, vibe}){
      const cat = catSel==='auto' ? detectCategory(q) : catSel;
      let bag = POOL[cat] || POOL.general;
      bag = JSON.parse(JSON.stringify(bag)); // ë³µì‚¬
      bag = applyVibeWeight(bag, vibe);

      const picks = [];
      const used = new Set();
      const howMany = mode==='3' ? 3 : 1;
      for(let i=0;i<howMany;i++){
        // ë™ì¼ ë¬¸êµ¬ ì¤‘ë³µ ë°©ì§€
        let tries=0; let choice;
        do{ choice = pickWeighted(bag); tries++; } while(used.has(choice.t) && tries<8);
        used.add(choice.t);
        // ë½‘íŒ í•­ëª©ì˜ ê°€ì¤‘ì¹˜ë¥¼ ë‚®ì¶° ë‹¤ìŒ ì¹´ë“œ ë‹¤ì–‘ì„± í™•ë³´
        const idx = bag.findIndex(x=>x.t===choice.t);
        if(idx>=0) bag[idx].w = Math.max(1, Math.floor(bag[idx].w/3));
        picks.push({ ...choice, cat });
      }
      return {cat, picks};
    }

    // UI ì—°ê²°
    const qEl = document.getElementById('q');
    const modeEl = document.getElementById('mode');
    const vibeEl = document.getElementById('vibe');
    const catEl = document.getElementById('cat');
    const ansEl = document.getElementById('answers');

    function render(res){
      ansEl.innerHTML = '';
      const title = {
        love:'ì‚¬ë‘/ê³ ë°±', friend:'ì¹œêµ¬/ì¸ê°„ê´€ê³„', study:'ê³µë¶€/ì§„ë¡œ', risk:'ê²°ì •/ë¦¬ìŠ¤í¬', mood:'ë§ˆìŒ/ìê¸°ëŒë´„', general:'ì¼ë°˜'
      }[res.cat] || 'ì¼ë°˜';

      res.picks.forEach((p,i)=>{
        const div = document.createElement('div');
        div.className='ans';
        div.innerHTML = `<span class="tag">${title}</span> ${p.t}`;
        ansEl.appendChild(div);
      });
    }

    function run(){
      const res = answer({
        q: qEl.value.trim(),
        catSel: catEl.value,
        mode: modeEl.value,
        vibe: Number(vibeEl.value)
      });
      render(res);
    }

    document.getElementById('askBtn').addEventListener('click', run);
    document.getElementById('shuffleBtn').addEventListener('click', run);

    // ì´ˆê¸° ìƒ˜í”Œ
    qEl.value = 'ì´ ì¹œêµ¬ì—ê²Œ ê³ ë°±í• ê¹Œ?';
  </script>
</body>
</html>
